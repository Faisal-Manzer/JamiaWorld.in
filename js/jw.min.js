"use strict";window.$=document.querySelector.bind(document),window.$$=document.querySelectorAll.bind(document),Element.prototype.$=Element.prototype.querySelector,Element.prototype.$$=Element.prototype.querySelectorAll,Element.prototype.add=function(e){void 0===e&&(e="");var a=e.split(" ");if(""!==e)for(var t=0;t<a.length;t++)-1===a[t].search(/--/)?this.classList.add(a[t]):this.classList.remove(a[t].slice(2))},Element.prototype.append=function(e){this.appendChild(e)},String.prototype.load=function(e,a){var t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");t.open("POST",this,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(e),t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){console.log(t.responseText);var e=JSON.parse(t.responseText);a(e)}}};var root="http://"+location.host,app={isLoading:!0,theme:"jw-theme",contrast:"jw-inverted",cardCount:0,carouselCount:0,paraCount:0,collectionCount:0,tabCount:0,collapsibleCount:0,tableCount:0,main:$("main .page-role"),page:".page-role",search:{},sideNav:{obj:$("#menu"),option:{edge:"right"},ini:null},fab:{obj:$("#fab"),option:{},ini:null},askLogin:{html:$(".components #askLogin").cloneNode(!0),displayLength:3e3}};function select(e,a){return a.querySelector(e)}function create(e,a){var t;return void 0===a&&(a="."),"."!==a?t=document.createElement(e):(t=document.createElement("div"),a=e),t.add(a),t}function append(e,a){e.appendChild(a)}function add(e,a){void 0===a&&(a="");var t=a.split(" ");if(""!==a)for(var n=0;n<t.length;n++)e.classList.add(t[n])}function check(e,a,t){typeof a!=typeof!0&&void 0!==e&&(a(),t=function(){},a=!1),(void 0!==e&&a||void 0==e&&!a&&typeof a==typeof!0)&&t()}function def(e,a,t){var n=e;return check(t,function(){n=t+""+n}),check(a,function(){n=a}),console.log(n),n}app.init=function(){app.ini=M.Sidenav.init(app.sideNav.obj,app.sideNav.option),app.ini=M.FloatingActionButton.init(app.fab.obj,app.fab.option),setTimeout(function(){M.toast(app.askLogin)},3e3)},app.prevent=function(){for(var e=document.getElementsByTagName("a"),a=location.href,t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.preventDefault(),this.href!==a+"#"&&this!==a+"#!"&&this!==a+void 0&&this.href!==a&&""!==this.href&&app.navigate(this.href)})},app.add=function(e){for(var a=0;a<e.length;a++)check(e.parent,function(){console.log(e.parent),check(e[a].parent,!1,function(){e[a].parent=e.parent,console.log(e[a].parent)})}),app.add(e[a]);switch(e.type){case"card":app.createCard(e);break;case"carousel":app.createCarousel(e);break;case"para":app.createPara(e);break;case"collection":app.createCollection(e);break;case"tabs":app.createTabs(e);break;case"collapsible":app.createCollapsible(e);break;case"table":app.createTable(e)}},app.createCard=function(e){var a,t="jw-basic";check(e.theme,function(){t=e.theme}),check(e.contrast,function(){e.contrast});var n=create("card "+t);n.id=def(app.cardCount,e.id,"card-"),check(e.eclass,function(){n.add(e.eclass)}),app.cardCount++,check(e.img,function(){var a=create("card-image"),t=create("img","");t.src=root+"/images/"+e.img;var c=create("span","card-title jw-basic-opacity jw-w");c.innerHTML=e.title,a.append(t),a.append(c),check(e.icon,function(){var t=create("a","btn-floating halfway-fab"+e.contrast);act.href=e.iconAct;var n=create("i",e.icon);t.append(n),a.append(t)}),n.append(a)});var c=create("card-content");check(e.img,!1,function(){var a=create("card-title");a.innerHTML=e.title,c.append(a)});var o=create("p","");a=n.id+"-para",o.id=a,o.innerHTML=e.cont,c.append(o),n.append(c),check(e.act,function(){for(var a=create("card-action"),t=0;t<e.act.length;t++){var c=create("a","");c.href=e.act[t].link,c.innerHTML=e.act[t].name,a.append(c)}n.append(a)}),$(def("",e.parent,app.page+" ")).append(n),check(e.saru,function(){e.saru.parent="#"+a,app.add(e.saru)})},app.createCarousel=function(e){var a=create("carousel"),t=def(app.carouselCount,e.id,"carousel-"),n=[];a.id=t,app.carouselCount++,check(e.eclass,function(){a.add(e.eclass)}),check(e.fixed,function(){var t=create("carousel-fixed-item center");t.innerHTML=e.fixed,a.append(t)}),check(e.items,function(){for(var t=0;t<e.items.length;t++){var c=create("carousel-item");c.add(e.items[t].eclass);var o=a.id+"-item-"+t;c.id=o,c.innerHTML=e.items[t].cont,a.append(c),check(e.items[t].saru,function(){e.items[t].saru.parent="#"+o,n[t]=e.items[t].saru})}}),$(def("",e.parent,app.page+" ")).append(a);for(var c=$("#"+t),o=(M.Carousel.init(c,e.option),0);o<n.length;o++)app.add(n[o])},app.createPara=function(e){var a=create("p","");check(e.eclass,function(){a.add(e.eclass)}),a.id=def(app.paraCount,e.id,"para-"),app.paraCount++;var t=create("span","");"string"==typeof e.title&&(t.innerHTML="<b>"+e.title+"</b>"),check(e.title.cont,function(){t.innerHTML=e.title.cont}),check(e.title.eclass,function(){t.add(e.eclass)});var n=create("span",""),c=a.id+"-cont";n.id=c,n.innerHTML=e.cont,a.append(t),a.append(n),$(def("",e.parent,app.page+" ")).append(a),check(e.saru,function(){e.saru.parent="#"+c,app.add(e.saru)})},app.createCollection=function(e){var a=create("ul","collection"),t=[];a.id=def(app.collectionCount,e.id,"collection-");t=[];app.collection++,check(e.eclass,function(){a.add(e.eclass)}),check(e.items,function(){for(var n=e.items,c=0;c<n.length;c++){var o,i=n[c],p=create("li","collection-item");check(i.eclass,function(){p.add(i.eclass)}),check(i.img,function(){p.add("avatar");var e=create("img","circle");e.src=root+"/images/"+i.img,p.append(e)}),check(i.title,function(){var e=create("span","title");e.innerHTML=i.title,p.append(e)});var r=create("p","");o=a.id+"-cont-"+c,r.id=o,r.innerHTML=i.cont,p.append(r),check(i.icon,function(){var e=create("a","secondary-content material-icons");if(e.href="#!",check(i.icon.href,function(){e.href=i.icon.href}),check(i.icon.icon,function(){var a=create("i",i.icon.icon);e.append(a)}),"string"==typeof i.icon){var a=create("i",i.icon);e.append(a)}p.append(e)}),a.append(p),check(i.saru,function(){i.saru.parent="#"+o,t[c]=i.saru})}$(def("",e.parent,app.page+" ")).append(a);for(c=0;c<t.length;c++)app.add(t[c])})},app.createCollapsible=function(e){var a=create("ul","collapsible"),t=def(app.tabCount,e.id,"collapsible-");a.id=t;var n=[];check(e.eclass,function(){a.add(e.eclass)}),check(e.options.popout,function(){e.options.popout&&(a.classList.remove("collapsible"),a.add("collapsible popout"))});for(var c=0;c<e.items.length;c++){var o=create("li","");check(e.items[c].eclass,function(){o.add(e.items[c].eclass)});var i=create("collapsible-header");i.innerHTML=e.items[c].title;var p=create("collapsible-body"),r=t+"-cont-"+c;p.id=r,p.innerHTML=e.items[c].cont,n[c]="",check(e.items[c].saru,function(){e.items[c].saru.parent="#"+r,n[c]=e.items[c].saru}),o.append(i),o.append(p),a.append(o)}console.log(e.parent),$(def("",e.parent,app.page+" ")).append(a),console.log(a);for(M.Collapsible.init($("#"+t),e.options),c=0;c<n.length;c++)app.add(n[c])},app.createTabs=function(e){var a=create("col s12"),t=create("ul","tabs"),n=[],c=def(app.tabCount,e.id,"tab-");t.id=c,check(e.eclass,function(){t.add(e.eclass)});for(var o=0;o<e.items.length;o++){var i=create("li","tab col s3"),p=create("a","");check(e.active,function(){e.active===o&&p.add("active")}),p.href="#"+c+"-cont-"+o,p.innerHTML=e.items[o].title,i.append(p),t.append(i)}a.append(t);for(o=0;o<e.items.length;o++){var r=create("col s12");r.id=c+"-cont-"+o,check(e.items[o].eclass,function(){r.add(e.items[o].eclass)}),r.innerHTML=e.items[o].cont,a.append(r),n[o]={},check(e.items[o].saru,function(){e.items[o].saru.parent="#"+r.id,n[o]=e.items[o].saru})}$(def("",e.parent,app.page+" ")).append(a);for(M.Tabs.init($("#"+c),check(e.options,function(){return e.option})),o=0;o<n.length;o++)app.add(n[o]);app.tabsCount++},app.createTable=function(e){var a=create("table",""),t=def(app.tableCount,e.id,"table-");a.id=t;check(e.eclass,function(){a.add(e.eclass)}),check(e.header,function(){for(var t=create("thead",""),n=(create("tr",""),0);n<e.header.length;n++){var c=create("th","");c.innerHTML=e.header[n],c.append(td)}t.append(c),a.append(t)}),check(e.items,function(){for(var t=create("tbody",""),n=0;n<e.items.length;n++){for(var c=create("tr",""),o=0;o<e.items[n].length;o++){var i=create("td","");i.innerHTML=e.items[n][o],c.append(i)}t.append(c)}a.append(t)});var n=$(def("",e.parent,app.page+" "));console.log(e.parent),n.append(a)},app.navigate=function(e){history.pushState("THEONE","THETWO",e)},app.searchInit=function(){(root+"/data/courses_search.php").load("",function(e){var a=document.querySelector("#mainSearch");app.search=e.url;var t={data:e.data,onAutocomplete:function(){console.log(a.value);var e=a.value,t=app.search[e];window.location="http://"+location.host+t}};M.Autocomplete.init(a,t)})},app.loadData=function(){(root+"/data/main.php").load("path="+location.pathname,function(e){app.add(e),$(".loader").add("hide")})},window.onload=function(){app.init(),app.searchInit(),app.loadData()};
